const n=JSON.parse('{"key":"v-8b6330ca","path":"/til/helloVuePress.html","title":"VuePress部署","lang":"zh-CN","frontmatter":{"lang":"zh-CN","title":"VuePress部署","description":"VuePress部署遇到的问题","comment":true},"headers":[],"git":{"updatedTime":1679457708000,"contributors":[{"name":"季艺","email":"jiyilc@chinatelecom.cn","commits":2}]},"filePathRelative":"til/helloVuePress.md","excerpt":"<h1> Hello VuePress</h1>\\n<p>将vuepress部署在github上，项目初始化之后直接看文档的部署部分。</p>\\n<ol>\\n<li>没有修改base，因为直接发布到jiyi.github.io</li>\\n<li>使用github actions，按照 https://v2.vuepress.vuejs.org/zh/guide/deployment.html#github-pages 文档创建了文件，使用了配置样例。其中修改了branches，把main修改成了master。node我本地用了16，所以也修改成了16。其中有疑惑的部分是<code>GITHUB_TOKEN</code>要不要改，网上搜到的教程用的都是<code>ACCESS_TOKEN</code>。没有改，部署成功。</li>\\n<li>部署上之后原来的域名不能用了，需要新增一条<code>fqdn: jiyi.dev</code>放到部署文件里面。最终文件如下<div class=\\"language-yaml line-numbers-mode\\" data-ext=\\"yml\\"><pre class=\\"language-yaml\\"><code><span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> docs\\n\\n<span class=\\"token key atrule\\">on</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token comment\\"># 每当 push 到 main 分支时触发部署</span>\\n  <span class=\\"token key atrule\\">push</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token key atrule\\">branches</span><span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">[</span>master<span class=\\"token punctuation\\">]</span>\\n  <span class=\\"token comment\\"># 手动触发部署</span>\\n  <span class=\\"token key atrule\\">workflow_dispatch</span><span class=\\"token punctuation\\">:</span>\\n\\n<span class=\\"token key atrule\\">jobs</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token key atrule\\">docs</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token key atrule\\">runs-on</span><span class=\\"token punctuation\\">:</span> ubuntu<span class=\\"token punctuation\\">-</span>latest\\n\\n    <span class=\\"token key atrule\\">steps</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">uses</span><span class=\\"token punctuation\\">:</span> actions/checkout@v3\\n        <span class=\\"token key atrule\\">with</span><span class=\\"token punctuation\\">:</span>\\n          <span class=\\"token comment\\"># “最近更新时间” 等 git 日志相关信息，需要拉取全部提交记录</span>\\n          <span class=\\"token key atrule\\">fetch-depth</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">0</span>\\n\\n      <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> Setup pnpm\\n        <span class=\\"token key atrule\\">uses</span><span class=\\"token punctuation\\">:</span> pnpm/action<span class=\\"token punctuation\\">-</span>setup@v2\\n        <span class=\\"token key atrule\\">with</span><span class=\\"token punctuation\\">:</span>\\n          <span class=\\"token comment\\"># 选择要使用的 pnpm 版本</span>\\n          <span class=\\"token key atrule\\">version</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">7</span>\\n          <span class=\\"token comment\\"># 使用 pnpm 安装依赖</span>\\n          <span class=\\"token key atrule\\">run_install</span><span class=\\"token punctuation\\">:</span> <span class=\\"token boolean important\\">true</span>\\n\\n      <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> Setup Node.js\\n        <span class=\\"token key atrule\\">uses</span><span class=\\"token punctuation\\">:</span> actions/setup<span class=\\"token punctuation\\">-</span>node@v3\\n        <span class=\\"token key atrule\\">with</span><span class=\\"token punctuation\\">:</span>\\n          <span class=\\"token comment\\"># 选择要使用的 node 版本</span>\\n          <span class=\\"token key atrule\\">node-version</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">16</span>\\n          <span class=\\"token comment\\"># 缓存 pnpm 依赖</span>\\n          <span class=\\"token key atrule\\">cache</span><span class=\\"token punctuation\\">:</span> pnpm\\n\\n      <span class=\\"token comment\\"># 运行构建脚本</span>\\n      <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> Build VuePress site\\n        <span class=\\"token key atrule\\">run</span><span class=\\"token punctuation\\">:</span> pnpm docs<span class=\\"token punctuation\\">:</span>build\\n\\n      <span class=\\"token comment\\"># 查看 workflow 的文档来获取更多信息</span>\\n      <span class=\\"token comment\\"># @see https://github.com/crazy-max/ghaction-github-pages</span>\\n      <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> Deploy to GitHub Pages\\n        <span class=\\"token key atrule\\">uses</span><span class=\\"token punctuation\\">:</span> crazy<span class=\\"token punctuation\\">-</span>max/ghaction<span class=\\"token punctuation\\">-</span>github<span class=\\"token punctuation\\">-</span>pages@v2\\n        <span class=\\"token key atrule\\">with</span><span class=\\"token punctuation\\">:</span>\\n          <span class=\\"token comment\\"># 部署到 gh-pages 分支</span>\\n          <span class=\\"token key atrule\\">target_branch</span><span class=\\"token punctuation\\">:</span> gh<span class=\\"token punctuation\\">-</span>pages\\n          <span class=\\"token comment\\"># 部署目录为 VuePress 的默认输出目录</span>\\n          <span class=\\"token key atrule\\">build_dir</span><span class=\\"token punctuation\\">:</span> docs/.vuepress/dist\\n          <span class=\\"token comment\\"># CNAME</span>\\n          <span class=\\"token key atrule\\">fqdn</span><span class=\\"token punctuation\\">:</span> jiyi.dev\\n        <span class=\\"token key atrule\\">env</span><span class=\\"token punctuation\\">:</span>\\n          <span class=\\"token comment\\"># @see https://docs.github.com/cn/actions/reference/authentication-in-a-workflow#about-the-github_token-secret</span>\\n          <span class=\\"token key atrule\\">GITHUB_TOKEN</span><span class=\\"token punctuation\\">:</span> $<span class=\\"token punctuation\\">{</span><span class=\\"token punctuation\\">{</span> secrets.GITHUB_TOKEN <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">}</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div></li>\\n</ol>"}');export{n as data};
